# USRTRACK

定义一个探测器，用于估计粒子的径迹注量

相关内容可参见 USRBDX, USRBIN, USRCOLL

完整的探测器定义需要两个连续的卡才能完成（用第70列后任意位置存在的字符"&"标识的第二张卡必须存在，除非接受相应的默认设置）

第一张卡：

    参数 （1） =  1.0 ： 线性能量道数坐标
              = -1.0 ： 对数能量道数坐标
              默认 = 1.0 （线性能量道数坐标）

    参数 （2） =（普遍的）待记录粒子类型
              默认 = 201.0（所有粒子）

    参数 （3） = 逻辑输出单元：
              > 0.0 : 经过格式化的数据
              < 0.0 ：未经格式化的数据
              除+11外，参数 （3） 的数值绝对值应当不小于21
              默认 = 标准输出单元

    参数 （4） > 0 ：探测器所在区域
              = -1：所有区域（见备注7）
              默认 = 1.0

    参数 （5） = 探测器体积（单位立方厘米，cm**3）[^1]
              默认 = 1.0

    参数 （6） = 能量道数
              默认 = 10.0

    尾注      = 任意字符串（不包括字符"&"）用以标识探测器名称。最多10个字符

第二张卡：

    参数 （1） = 待记录最大动能
              默认：BEAM卡中给定的离子束能量（如果BEAM卡不存在，则为200 GeV/c 动量的相应能量）

    参数 （2） = 待记录最小动能
              默认：线性坐标时为0，否则为0.01 GeV
              注意，对于260数据集合而言，最后中子能量组的能量下限是1.0E-14 GeV（Note that the lowest energy limit
              of the last neutron group is 1.E-14 GeV (1.E-5 eV) for the 260 data set.）

    参数 （3） 至 参数 （6） 不使用

    尾注       = "&" 在71-78列的任意位置



注意！

备注：

    1. （重要！）USRTRACK卡的计算结果以注量对能量的微分分布的形式给出，单位是cm-2 GeV-1 每入射粒子单位重量，
        例如当需要得到粒子注量能谱的时候，需要获取道数积分结果（每平方厘米每能量道每入射粒子的注量），使用人必
        须将每一能量道的宽度和能量道乘起来（即使是对于对数道数坐标）。

    2.  如果待记录粒子类型是208（能量）或者211（电磁能量），记录的量是微分能注量，单位GeV 每平方厘米每单位能量
        每入射粒子。有时这会造成一种困惑，因为GeV cm-2 GeV = cm-2，能量看起来已经被消掉了。注意对于能量的积分
        可以得到GeV/cm2

    3.  用户可定义的最大径迹+碰撞探测器数是400.如有需要，可以通过修改flukadd目录中的成员USRTRC中的MXUSTC参数
        ，然后重新编译和链接FLUKA的方式实现。

    4.  计算结果的逻辑输出单元（第一张卡中的参数（3））可以是下列中任意一个：
        * 标准输出单元11：计算结果将会在标准FLUKA输入文件当中记录
        * 预连接单元（对于多数UNIX系统是通过系统链接，对VMS是ASSIGN，或者其他系统中的等效命令）
        * 用FLUKA指令OPEN打开的文件
        * 用Fortran语句OPEN在用户定义初始化脚本中打开的文件，例如USRINI，USRGLO或者Source卡（参见备注13）
        * 一个动态的通过Fortran编译器默认安排的文件（通常是fort.xx 或者ftn.xx，其中xx是用户给定的逻辑输出单元）

    同一次FLUKA运行当中的多个USRTRACK和USRCOLL探测器的结果可以被记录在一个文件里，只要他们都具有相同的类型（都是
    格式化的或者都是未格式化的）。同样也可以在一个文件中记录不同类型的计算结果（例如USRBDX，USRBIN等），但是并不
    推荐这样做，尤其是当使用未格式化文件的时候，因为这样可能对阅读和分析计算结果造成非常大的不便。

    5.  当记录中子注量并且所需的能量道结构同低能中字群有交叠时，道边界被强制同群边界相符，并且没有道数可以比相应的
        群更小。事实上，程序利用要求的能量限制和道数去决定每道的宽度。超过第一个低能中子群能量上限部分的道数会根据
        这个宽度重新计算。为了保证要求的能量上限，超过低能中子群的第一道的道宽可能会比其他道窄。注意最后低能中子群
        的能量下限是1.0E-14GeV对于260数据系列。所有的群能量边界都在表（10）中列出。

    6.  位于$FLUPRO/flutil中的USTSUW程序可用于处理数据。USTSUW阅读USRTRACK卡的二进制计算结果，然后在一个文件中
        给出微分和累计注量和相应的相对误差，在另一个文件中给出微分注量表格以便于绘图。同时将会给出一个可以被USTSUW
        阅读的二进制文件。这个文件的内容在统计学上相当于用于产生它的文件的内容之和，并且替代了他们，同未来可能的输出
        文件联合起来（USTSUW程序会给它合适的权重）。

    7.  设置卡1的参数（4）为-1将会给出所有区域的径迹之和除以参数（5）中用户设定体积的结果。

示例：
```
*...+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8
USRTRACK         1.0    PHOTON     -24.0      16.0    4500.0      150.PhotFlu
USRTRACK         1.5       0.0       0.0       0.0       0.0        0.  &
*  计算光子区域16内，从0-1.5 GeV的光子能谱。结果分为150个能量道。通过逻辑输出单元24记录未格式化的输出结果。
*  区域16的体积是4500立方厘米
```

[^1]:这里的内容依赖于
